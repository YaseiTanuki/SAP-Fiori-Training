<mvc:View
    controllerName="improve.controller.Detail"
    xmlns="sap.uxap"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:m="sap.m"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smarttable="sap.ui.comp.smarttable">

    <ObjectPageLayout
        id="requestObjectPage"
        showHeaderContent="true"
        enableLazyLoading="true">

        <headerTitle>
            <ObjectPageDynamicHeaderTitle>
                <content>
                    <m:Title text="{creator}" level="H1"/>
                    <m:Label text="Request ID: {request_id}" />
                </content>
                <actions>
                    <m:Button text="Sửa Request" icon="sap-icon://edit" press="onEditRequest"/>
                    <m:Button text="Xóa Request" icon="sap-icon://delete" press="onDeleteRequest"/>
                </actions>
            </ObjectPageDynamicHeaderTitle>
        </headerTitle>

        <sections>
            <!-- Section 1: Request Info -->
            <ObjectPageSection title="Thông tin chung">
                <ObjectPageSubSection>
                    <m:VBox>
                        <m:Label text="Creator"/>
                        <m:Text text="{creator}" />

                        <m:Label text="Created Date"/>
                        <m:Text text="{created_date}" />

                        <m:Label text="Status"/>
                        <m:Text text="{status}" />

                        <m:Label text="Total"/>
                        <m:Text text="{total} {currency_code}" />
                    </m:VBox>
                </ObjectPageSubSection>
            </ObjectPageSection>

            <!-- Section 2: Danh sách Item -->
            <ObjectPageSection title="Danh sách Item">
                <ObjectPageSubSection>
                    <m:VBox>
                        <smartFilterBar:SmartFilterBar id="itemFilterBar"
                            entitySet="ZDF_ITEM"
                            enableBasicSearch="false"
                            liveMode="true"/>
                        <smarttable:SmartTable
                            id="itemTable"
                            entitySet="ZDF_ITEM"
                            tableType="Table"
                            enableExport="true"
                            useVariantManagement="true"
                            useTablePersonalisation="true"
                            header="Item List"
                            persistencyKey="SmartTable_Item"
                            showRowCount="true"
                            smartFilterId="itemFilterBar">
                        </smarttable:SmartTable>
                    </m:VBox>
                </ObjectPageSubSection>
            </ObjectPageSection>
        </sections>
    </ObjectPageLayout>

    <!-- Dialog sửa request -->
    <m:Dialog
      id="editRequestDialog"
      title="Sửa thông tin Request"
      stretchOnPhone="true"
      class="sapUiResponsivePadding--header sapUiResponsivePadding--content sapUiResponsivePadding--footer">
      
      <m:VBox class="sapUiSmallMargin">
        <m:Label text="Creator" labelFor="creatorInput"/>
        <m:Input id="creatorInput" width="100%" />

        <m:Label text="Status" labelFor="statusInput"/>
        <m:Input id="statusInput" width="100%" />

        <m:Label text="Total" labelFor="totalInput"/>
        <m:Input id="totalInput" type="Number" width="100%" />

        <m:Label text="Currency Code" labelFor="currencyInput"/>
        <m:Input id="currencyInput" width="100%" />
      </m:VBox>

      <m:buttons>
        <m:Button text="Cancel" press=".onCancelEditRequest"/>
        <m:Button text="Save" type="Emphasized" press=".onSaveEditRequest"/>
      </m:buttons>
    </m:Dialog>
</mvc:View>
